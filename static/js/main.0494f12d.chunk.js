(this["webpackJsonpcurrency-converter"]=this["webpackJsonpcurrency-converter"]||[]).push([[0],{57:function(e,t,a){e.exports=a(91)},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),l=a(13),s=(a(62),a(63),a(12)),i=a(16),u=(a(64),a(94)),m=a(95),f=a(48),E=a(22),v=a(24),h=a(10),d=(a(65),a(96)),y=a(14),p=a(15),b=a(6),O=a(23),g=a(46),N=a.n(g),j={HOST:"https://free.currconv.com",API_KEY:"d44b5d43258c64da53fc"},S=function e(){var t=this;Object(O.a)(this,e),this._getUrl=function(e){return t._getHost()+e},this._getHost=function(){var e=j.HOST;if(!e)throw new Error("Cannot get host address from config file");return e},this._resolveHeaders=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(Object(h.a)({},t.headers),e)},this.get=function(e){return N()({headers:t._resolveHeaders(e.headers),method:"GET",url:t._getUrl(e.endpoint)}).then((function(t){if(!(t.status>=200&&t.status<300))throw new Error("Data not loaded",t);e.onSuccess(t.data)})).catch((function(e){return console.log(e)}))},this.headers={"Content-Type":"application/json",Accept:"application/json"}},w={CONVERTER:"/api/v7/convert",CURRENCIES:"/api/v7/currencies",COUNTRIES:"/api/v7/countries",USAGE:"/others/usage"},C=function(e){if("undefined"===typeof Storage)throw new Error("No Web Storage support..");return JSON.parse(localStorage.getItem(e))},k=function(e){var t=e.formState,a=e.setFormState,c=e.historyList,o=e.setHistoryList,l=Object(n.useState)([]),i=Object(s.a)(l,2),u=i[0],m=i[1],f=Object(n.useState)(!0),O=Object(s.a)(f,2),g=O[0],N=O[1],k=Object(b.f)();Object(n.useEffect)((function(){H()}),[]),Object(n.useEffect)((function(){N(!0),t.amount>0&&N(!1)}),[t.amount]);var H=function(){new Promise((function(e,t){(new S).get({endpoint:"".concat(w.CURRENCIES,"?apiKey=").concat(j.API_KEY),onSuccess:function(t){return e(t)},onError:function(e){return t(e)}})})).then((function(e){var t=Object.keys(e.results).map((function(t){return e.results[t].id})).sort();return m(t),t})).then((function(e){a(Object(h.a)(Object(h.a)({},t),{},{fromCurrency:e[0],toCurrency:e[0]}))}))},x=function(e){var n=e.target,r=n.value,c=n.name;a(Object(h.a)(Object(h.a)({},t),{},Object(E.a)({},c,r)))};return r.a.createElement("div",{className:"converter-main"},r.a.createElement(d.a,{onSubmit:function(e){var n,r;e.preventDefault(),(n=t.fromCurrency,r=t.toCurrency,new Promise((function(e,t){(new S).get({endpoint:"".concat(w.CONVERTER,"?q=").concat(n,"_").concat(r,"&compact=ultra&apiKey=").concat(j.API_KEY),onSuccess:function(t){return e(t)},onError:function(e){return t(e)}})}))).then((function(e){var n=Object.values(e)[0]*t.amount;return a(Object(h.a)(Object(h.a)({},t),{},{score:n})),n})).then((function(e){var a={today:(new Date).toJSON().slice(0,10).split("-").reverse().join("."),before:t.amount+" "+t.fromCurrency,after:parseFloat(e).toFixed(2)+" "+t.toCurrency};o([a].concat(Object(v.a)(c))),function(e,t){var a=C(e);if(null===a)localStorage.setItem(e,JSON.stringify([t]));else{var n=[Object(h.a)({},t)].concat(Object(v.a)(a));localStorage.setItem(e,JSON.stringify(n))}}("history",a)})).then((function(){k.push("history")}))},className:"converter-form"},r.a.createElement("h2",null,"Konwerter walut"),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,{className:"form-input-label"},r.a.createElement("div",null,"Wpisz kwot\u0119"),r.a.createElement("div",null,t.fromCurrency)),r.a.createElement(d.a.Control,{as:"input",name:"amount",value:t.amount,onChange:x})),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,{className:"form-input-label"},r.a.createElement("div",null,"Wynik"),r.a.createElement("div",null,t.toCurrency)),r.a.createElement(d.a.Control,{readOnly:!0,value:t.score})),r.a.createElement(d.a.Group,null,r.a.createElement("div",{className:"converter-currency-select-group"},r.a.createElement(d.a.Control,{className:"conv-select",as:"select",name:"fromCurrency",value:t.fromCurrency,onChange:x},u.map((function(e,t){return r.a.createElement("option",{key:t,value:e,name:e},e)}))),r.a.createElement(y.a,{className:"conv-arrows",icon:p.a,"data-config-id":"icon",size:"1x",color:"#000"}),r.a.createElement(d.a.Control,{className:"conv-select",as:"select",name:"toCurrency",value:t.toCurrency,onChange:x},u.map((function(e,t){return r.a.createElement("option",{key:t,value:e,name:e},e)}))))),r.a.createElement("button",{className:"converter-btn ".concat(g?"disabled-btn":""),type:"submit",disabled:g},"KONWERTUJ")))},H=(a(89),a(93)),x=function(e){var t=e.historyList,a=e.setHistoryList;return r.a.createElement("div",{className:"history-list-main"},r.a.createElement("div",{className:"flex-container"},r.a.createElement("div",{className:"flex-header"},r.a.createElement("div",{className:"flex-hcell"},"Data"),r.a.createElement("div",{className:"flex-hcell"},"Przed konwersj\u0105"),r.a.createElement("div",{className:"flex-hcell"}),r.a.createElement("div",{className:"flex-hcell"},"Po konwersji")),r.a.createElement("div",{className:"flex-overflow"},0!==t.length?t.map((function(e,t){return r.a.createElement("div",{key:t,className:"flex-trow"},r.a.createElement("div",{className:"flex-tcell"},e.today),r.a.createElement("div",{className:"flex-tcell"},e.before),r.a.createElement("div",{className:"flex-tcell"},r.a.createElement(y.a,{className:"",icon:p.b,"data-config-id":"icon",size:"1x",color:"#fff"})),r.a.createElement("div",{className:"flex-tcell"},e.after))})):r.a.createElement("div",{className:"flex-empty"},"Brak historii konwersji walut"))),r.a.createElement(H.a,{variant:"link",className:"history-list-clearbtn",onClick:function(){console.log("History cleared"),localStorage.clear(),a([])}},"Wyczy\u015b\u0107 histori\u0119"))},I=(a(90),function(e){var t=e.isHistoryOn,a=void 0!==t&&t;Object(i.a)(e,["isHistoryOn"]);return r.a.createElement("div",{className:"history-tab-main"},a&&r.a.createElement(l.b,{to:"/".concat(a?"":"history"),className:"history-tab-link"},r.a.createElement(y.a,{className:"conv-arrows",icon:p.c,"data-config-id":"icon",size:"1x",color:"#fff"})),r.a.createElement(l.b,{to:"/".concat(a?"":"history")},r.a.createElement("span",{className:"rotate"},"Historia")))}),_=a(97),L=function(e){var t=e.formState,a=(Object(i.a)(e,["formState"]),Object(n.useState)(0)),c=Object(s.a)(a,2),o=c[0],l=c[1];return Object(n.useEffect)((function(){new Promise((function(e,t){(new S).get({endpoint:"".concat(w.USAGE,"?apiKey=").concat(j.API_KEY),onSuccess:function(t){return e(t)},onError:function(e){return t(e)}})})).then((function(e){l(e)}))}),[t.score]),r.a.createElement(_.a,{variant:"".concat(o.usage>80?"danger":"primary"),className:"home-usage-alert"},"Free API version. 100 usages per hour."," ",o&&r.a.createElement("span",null,P(o.usage)," left."))},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return t-e<=0?0:t-e},R={today:(new Date).toJSON().slice(0,10).split("-").reverse().join("."),fromCurrency:"",toCurrency:"",amount:0,score:0},A=function(e){var t=e.isHistoryOn,a=void 0!==t&&t,c=(Object(i.a)(e,["isHistoryOn"]),Object(n.useState)(R)),o=Object(s.a)(c,2),l=o[0],E=o[1],v=Object(n.useState)((function(){var e=C("history");return e||[]})),h=Object(s.a)(v,2),d=h[0],y=h[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{fluid:!0,className:"home-page-container"},r.a.createElement(m.a,null,r.a.createElement(f.a,null,r.a.createElement("div",{className:"home-page-main"},r.a.createElement(k,{isHistoryOn:a,formState:l,setFormState:E,historyList:d,setHistoryList:y}),a&&r.a.createElement(x,{historyList:d,setHistoryList:y}),r.a.createElement(I,{isHistoryOn:a})))),r.a.createElement(L,{formState:l})))},K=a(51),J=a(55),T=a(52),U=function(e){Object(J.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(K.a)(a,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(n.Component);var D=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(U,null,r.a.createElement(b.c,null,r.a.createElement(b.a,{exact:!0,path:["/","/currency-converter"]},r.a.createElement(A,{isHistoryOn:!1})),r.a.createElement(b.a,{path:"/history"},r.a.createElement(A,{isHistoryOn:!0})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(D,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[57,1,2]]]);
//# sourceMappingURL=main.0494f12d.chunk.js.map